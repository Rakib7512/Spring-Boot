<div class="container mt-4">
  <h2 class="text-center mb-4">ðŸ“¦ View All Parcels</h2>

  <!-- Loading Spinner -->
  <div *ngIf="loading" class="text-center">
    <div class="spinner-border text-primary" role="status"></div>
    <p>Loading parcels...</p>
  </div>

  <!-- Error Message -->
  <div *ngIf="errorMessage" class="alert alert-danger">
    {{ errorMessage }}
  </div>

  <!-- Card Grid -->
  <div class="row" *ngIf="!loading && parcels.length > 0">
    <div class="col-md-4 mb-4" *ngFor="let parcel of parcels">
      <div class="card shadow-lg h-100">
        <div class="card-body">
          <h5 class="card-title">Tracking ID: <b>{{ parcel.trackingId }}</b></h5>
          <p class="card-text">
            <strong>Sender:</strong> {{ parcel.senderName }}<br>
            <strong>Receiver:</strong> {{ parcel.receiverName }}
          </p>
          <div class="d-flex justify-content-between mt-3">
            <button class="btn btn-primary btn-sm" (click)="viewParcel(parcel)">
              <i class="bi bi-eye"></i> View
            </button>
            <button class="btn btn-warning btn-sm" >
              <i class="bi bi-pencil"></i> Update
            </button>
            <button class="btn btn-danger btn-sm" >
              <i class="bi bi-trash"></i> Delete
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- No Parcels -->
  <div *ngIf="!loading && parcels.length === 0" class="alert alert-info text-center">
    No parcels found. Please add some parcels first.
  </div>
</div>

<!-- Parcel Details Modal -->
<div id="parcelDetailsModal" class="custom-modal" *ngIf="selectedParcel">
  <div class="custom-modal-content">
    <span class="close" (click)="closeModal()">&times;</span>
    <h4 class="mb-3">ðŸ“Œ Parcel Details</h4>
    <p><b>Tracking ID:</b> {{ selectedParcel.trackingId }}</p>
    <p><b>Sender:</b> {{ selectedParcel.senderName }} ({{ selectedParcel.senderPhone }})</p>
    <p><b>Receiver:</b> {{ selectedParcel.receiverName }} ({{ selectedParcel.receiverPhone }})</p>
    <p><b>Weight:</b> {{ selectedParcel.weight || '-' }} kg</p>
    <p><b>Size:</b> {{ selectedParcel.squareFeet || '-' }} sqft</p>
    <p><b>Fee:</b> à§³ {{ selectedParcel.fee }}</p>
    <p><b>Status:</b> {{ selectedParcel.status || 'Pending' }}</p>
    <p><b>Current Hub:</b> {{ selectedParcel.currentHub || 'Not Assigned' }}</p>
    <button class="btn btn-secondary mt-3" (click)="closeModal()">Close</button>
  </div>
</div>
