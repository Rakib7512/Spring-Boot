<div class="container mt-4">
  <h3 class="mb-3">Add New Parcel</h3>

  <div class="row">
    <div class="col-md-6">
      <label>Sender Name</label>
      <input [(ngModel)]="senderName" name="senderName" class="form-control" required>

      <label>Sender Phone</label>
      <input [(ngModel)]="senderPhone" name="senderPhone" class="form-control" required>



      <select class="form-select" [(ngModel)]="selectedSendCountry" (change)="onSendCountryChange()">
        <option value="">-- Select Country --</option>
        <option *ngFor="let c of countries" [value]="c.id">{{ c.name }}</option>
      </select>

      <select class="form-select" [(ngModel)]="selectedSendDivision" (change)="onSendDivisionChange()">
        <option value="">-- Select Division --</option>
        <option *ngFor="let d of divisions" [value]="d.id">{{ d.name }}</option>
      </select>

      <select class="form-select" [(ngModel)]="selectedSendDistrict" (change)="onSendDistrictChange()">
        <option value="">-- Select District --</option>
        <option *ngFor="let d of districts" [value]="d.id">{{ d.name }}</option>
      </select>

      <select class="form-select" [(ngModel)]="selectedSendPoliceStation">
        <option value="">-- Select Police Station --</option>
        <option *ngFor="let ps of policeStations" [value]="ps.id">{{ ps.name }}</option>
      </select>
      <div class="container mt-4">
        <h3>Add Address</h3>

        <div class="form-group mb-2">
          <label>Address Line 1</label>
          <input type="text" class="form-control" [(ngModel)]="senderAddress1">
        </div>

        <div class="form-group mb-2">
          <label>Address Line 2</label>
          <input type="text" class="form-control" [(ngModel)]="senderAddress2">
        </div>
      </div>


    </div>
    <div class="col-md-6">
      <label>Receiver Name</label>
      <input [(ngModel)]="receiverName" name="currentHub" class="form-control" required>

      <label>Receiver Phone</label>
      <input [(ngModel)]="receiverPhone" name="receiverPhone" class="form-control" required>

      <select class="form-select" [(ngModel)]="selectedReceiveCountry" (change)="onReceiveCountryChange()">
        <option value="">-- Select Country --</option>
        <option *ngFor="let c of countries" [value]="c.id">{{ c.name }}</option>
      </select>

      <select class="form-select" [(ngModel)]="selectedReceiveDivision" (change)="onReceiveDivisionChange()">
        <option value="">-- Select Division --</option>
        <option *ngFor="let d of divisions" [value]="d.id">{{ d.name }}</option>
      </select>

      <select class="form-select" [(ngModel)]="selectedReceiveDistrict" (change)="onReceiveDistrictChange()">
        <option value="">-- Select District --</option>
        <option *ngFor="let d of districts" [value]="d.id">{{ d.name }}</option>
      </select>

      <select class="form-select" [(ngModel)]="selectedReceivePoliceStation">
        <option value="">-- Select Police Station --</option>
        <option *ngFor="let ps of policeStations" [value]="ps.id">{{ ps.name }}</option>
      </select>

      <div class="container mt-4">
        <h3>Add Address</h3>

        <div class="form-group mb-2">
          <label>Address Line 1</label>
          <input type="text" class="form-control" [(ngModel)]="receiverAddress1">
        </div>

        <div class="form-group mb-2">
          <label>Address Line 2</label>
          <input type="text" class="form-control" [(ngModel)]="receiverAddress2">
        </div>
      </div>



    </div>
    <div class="row">
      <div class="form-group">
        <label>Weight (kg):</label>
        <input type="number" class="form-control" [(ngModel)]="weight" />
      </div>

      <div class="form-group">
        <label>Square Feet:</label>
        <input type="number" class="form-control" [(ngModel)]="squareFeet" />
      </div>

      <div *ngIf="fee > 0" class="mt-3">
        <h5>ðŸ“¦ Calculated Fee: {{ fee }} Taka</h5>

        <div class="form-group mt-3">
          <label for="paymentMethod">Payment Method</label>
          <select class="form-control" id="paymentMethod" [(ngModel)]="paymentMethod" (change)="updatePaymentDetails()">
            <option value="">Select Payment Method</option>
            <option value="bkash">Bkash</option>
            <option value="nagad">Nagad</option>
            <option value="bank">Bank</option>
          </select>
        </div>

        <div class="mt-2" *ngIf="paymentInfo">
          <div class="alert alert-info">
            {{ paymentInfo }}
          </div>
        </div>
      </div>


      <!-- Optional: Payment instructions -->
      <div class="alert alert-info mt-2" *ngIf="paymentMethod">
        Please complete the payment via {{ paymentMethod }} to continue.
      </div>

      <button class="btn btn-primary mt-2" (click)="startPayment()">ðŸ’° Proceed to Payment</button>

      <div class="alert alert-warning mt-2" *ngIf="trackingId && paymentSuccess">
        ðŸ“¦ Your Parcel Tracking ID: <strong>{{ trackingId }}</strong><br />
        Please include this ID when making your payment.
      </div>

      <div class="mt-3" *ngIf="paymentSuccess">
        <label>Enter Payment Confirmation Code:</label>
        <input type="text" class="form-control" [(ngModel)]="enteredConfirmationCode"
          placeholder="Enter confirmation code">
      </div>


    </div>

  </div>
</div>

<button type="submit" class="btn btn-success mt-3" (click)="onSubmitParcel()">Submit</button>