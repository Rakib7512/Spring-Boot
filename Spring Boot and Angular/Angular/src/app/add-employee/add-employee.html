<div class="container mt-5 p-4 rounded shadow-lg bg-white">

  <h3 class="text-center mb-4 text-primary fw-bold">
    <i class="bi bi-person-plus-fill me-2"></i> Add New Employee
  </h3>

  <!-- Message Alert -->
  <div *ngIf="message" class="alert text-center fw-semibold" [ngClass]="{
      'alert-success': message.startsWith('Success'),
      'alert-danger': message.startsWith('Fail')
    }">
    {{ message }}
  </div>

  <form [formGroup]="registrationForm" (ngSubmit)="onSubmit()" enctype="multipart/form-data" novalidate>

    <div class="row g-4">

      <!-- Full Name -->
      <div class="col-md-6">
        <label class="form-label fw-semibold"><i class="bi bi-person-badge-fill me-1"></i> Full Name</label>
        <input formControlName="name" type="text" class="form-control" placeholder="John Doe" />
        <div class="text-danger small" *ngIf="registrationForm.get('name')?.touched && registrationForm.get('name')?.invalid">
          Name is required.
        </div>
      </div>

      <!-- Email -->
      <div class="col-md-6">
        <label class="form-label fw-semibold"><i class="bi bi-envelope-fill me-1"></i> Email</label>
        <input formControlName="email" type="email" class="form-control" placeholder="example@mail.com" />
        <div class="text-danger small" *ngIf="registrationForm.get('email')?.touched && registrationForm.get('email')?.invalid">
          Valid email is required.
        </div>
      </div>

      <!-- Phone -->
      <div class="col-md-6">
        <label class="form-label fw-semibold"><i class="bi bi-telephone-fill me-1"></i> Phone Number</label>
        <input formControlName="phone" type="text" class="form-control" placeholder="017XXXXXXXX" />
        <div class="text-danger small" *ngIf="registrationForm.get('phone')?.touched && registrationForm.get('phone')?.invalid">
          Phone number is required.
        </div>
      </div>

      <!-- Password -->
      <div class="col-md-6">
        <label class="form-label fw-semibold"><i class="bi bi-lock-fill me-1"></i> Password</label>
        <input formControlName="password" type="password" class="form-control" placeholder="********" />
        <div class="text-danger small" *ngIf="registrationForm.get('password')?.touched && registrationForm.get('password')?.invalid">
          Password is required.
        </div>
      </div>

      <!-- Gender -->
      <div class="col-md-6">
        <label class="form-label fw-semibold"><i class="bi bi-gender-ambiguous me-1"></i> Gender</label>
        <select formControlName="gender" class="form-select">
          <option value="">Select Gender</option>
          <option value="MALE">Male</option>
          <option value="FEMALE">Female</option>
        </select>
        <div class="text-danger small" *ngIf="registrationForm.get('gender')?.touched && registrationForm.get('gender')?.invalid">
          Gender is required.
        </div>
      </div>

      <!-- NID -->
      <div class="col-md-6">
        <label class="form-label fw-semibold"><i class="bi bi-credit-card-2-front-fill me-1"></i> NID Number</label>
        <input formControlName="nid" type="text" class="form-control" placeholder="Enter NID number" />
        <div class="text-danger small" *ngIf="registrationForm.get('nid')?.touched && registrationForm.get('nid')?.invalid">
          NID number is required.
        </div>
      </div>

      <!-- Address -->
      <div class="col-md-12">
        <label class="form-label fw-semibold"><i class="bi bi-geo-alt-fill me-1"></i> Address</label>
        <textarea formControlName="address" rows="2" class="form-control" placeholder="Enter address"></textarea>
        <div class="text-danger small" *ngIf="registrationForm.get('address')?.touched && registrationForm.get('address')?.invalid">
          Address is required.
        </div>
      </div>

      <!-- Designation -->
      <div class="col-md-6">
        <label class="form-label fw-semibold"><i class="bi bi-person-badge me-1"></i> Designation</label>
        <input formControlName="designation" type="text" class="form-control" placeholder="e.g., Delivery Manager" />
        <div class="text-danger small" *ngIf="registrationForm.get('designation')?.touched && registrationForm.get('designation')?.invalid">
          Designation is required.
        </div>
      </div>

      <!-- Join Date -->
      <div class="col-md-6">
        <label class="form-label fw-semibold"><i class="bi bi-calendar-check-fill me-1"></i> Join Date</label>
        <input formControlName="joindate" type="date" class="form-control" />
        <div class="text-danger small" *ngIf="registrationForm.get('joindate')?.touched && registrationForm.get('joindate')?.invalid">
          Join date is required.
        </div>
      </div>

      <!-- Salary -->
      <div class="col-md-6">
        <label class="form-label fw-semibold"><i class="bi bi-currency-dollar me-1"></i> Salary</label>
        <input formControlName="salary" type="text" class="form-control" placeholder="Enter salary" />
        <div class="text-danger small" *ngIf="registrationForm.get('salary')?.touched && registrationForm.get('salary')?.invalid">
          Salary is required.
        </div>
      </div>

      <!-- Country -->
      <div class="col-md-6">
        <label class="form-label fw-semibold"><i class="bi bi-globe me-1"></i> Country</label>
        <select formControlName="country" class="form-select" [(ngModel)]="selectedCountry" (change)="onCountryChange()">
          <option value="">Select Country</option>
          <option *ngFor="let c of countries" [value]="c.id">{{ c.name }}</option>
        </select>
        <div class="text-danger small" *ngIf="registrationForm.get('country')?.touched && registrationForm.get('country')?.invalid">
          Country is required.
        </div>
      </div>

      <!-- Division -->
      <div class="col-md-6">
        <label class="form-label fw-semibold"><i class="bi bi-diagram-3-fill me-1"></i> Division</label>
        <select formControlName="division" class="form-select" [(ngModel)]="selectedDivision" (change)="onDivisionChange()">
          <option value="">Select Division</option>
          <option *ngFor="let d of divisions" [value]="d.id">{{ d.name }}</option>
        </select>
        <div class="text-danger small" *ngIf="registrationForm.get('division')?.touched && registrationForm.get('division')?.invalid">
          Division is required.
        </div>
      </div>

      <!-- District -->
      <div class="col-md-6">
        <label class="form-label fw-semibold"><i class="bi bi-map-fill me-1"></i> District</label>
        <select formControlName="district" class="form-select" [(ngModel)]="selectedDistrict" (change)="onSendDistrictChange()">
          <option value="">Select District</option>
          <option *ngFor="let d of districts" [value]="d.id">{{ d.name }}</option>
        </select>
        <div class="text-danger small" *ngIf="registrationForm.get('district')?.touched && registrationForm.get('district')?.invalid">
          District is required.
        </div>
      </div>

      <!-- Police Station -->
      <div class="col-md-6">
        <label class="form-label fw-semibold"><i class="bi bi-shield-lock-fill me-1"></i> Police Station</label>
        <select formControlName="policeStation" class="form-select" [(ngModel)]="selectedPoliceStation">
          <option value="">Select Police Station</option>
          <option *ngFor="let ps of policeStations" [value]="ps.id">{{ ps.name }}</option>
        </select>
        <div class="text-danger small" *ngIf="registrationForm.get('policeStation')?.touched && registrationForm.get('policeStation')?.invalid">
          Police Station is required.
        </div>
      </div>

      <!-- Assign Hub -->
      <div class="col-md-6">
        <label class="form-label fw-semibold"><i class="bi bi-hdd-rack-fill me-1"></i> Assign Hub</label>
        <select formControlName="empOnHub" class="form-select">
          <option value="">Select Hub</option>
          <option *ngFor="let ps of policeStations" [value]="ps.id">{{ ps.name }}</option>
        </select>
        <div class="text-danger small" *ngIf="registrationForm.get('empOnHub')?.touched && registrationForm.get('empOnHub')?.invalid">
          Hub is required.
        </div>
      </div>

      <!-- Upload Photo -->
      <div class="col-md-12">
        <label class="form-label fw-semibold"><i class="bi bi-image-fill me-1"></i> Upload Photo</label>
        <input type="file" class="form-control" (change)="onPhotoSelected($event)" accept="image/*" />
      </div>

      <!-- Submit -->
      <div class="col-12 text-center mt-4">
        <button class="btn btn-success px-4 py-2" type="submit" [disabled]="registrationForm.invalid">
          <i class="bi bi-plus-circle-fill me-1"></i> Add Employee
        </button>
      </div>

    </div>

  </form>
</div>
